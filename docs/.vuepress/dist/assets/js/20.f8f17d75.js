(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1007:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return f})),i.d(t,"c",(function(){return d})),i.d(t,"d",(function(){return l})),i.d(t,"e",(function(){return p})),i.d(t,"f",(function(){return c})),i.d(t,"g",(function(){return h})),i.d(t,"h",(function(){return y}));i(356);var s=i(339);var r=i(608),n=i(368);const a=new Map,o=new class{constructor(e=15e3,t=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=e,this._interval=Math.min(e,t)}decreaseRefCount(e,t){const i=e+"/"+t,s=this._cachedBlocks;if(s.has(i)){const e=s.get(i);return e.refCount--,e.refCount<=0&&(s.delete(i),e.controller&&e.controller.abort()),e.refCount}return 0}getBlock(e,t){const i=e+"/"+t,s=this._cachedBlocks;if(s.has(i)){const e=s.get(i);return e.ts=Date.now(),e.refCount++,s.delete(i),s.set(i,e),e.block}return null}putBlock(e,t,i,s=null){const r=this._cachedBlocks,n=e+"/"+t;if(r.has(n)){const e=r.get(n);e.ts=Date.now(),e.refCount++}else r.set(n,{block:i,ts:Date.now(),refCount:1,controller:s});this.trim(),this.updateTimer()}deleteBlock(e,t){const i=this._cachedBlocks,s=e+"/"+t;i.has(s)&&i.delete(s)}updateMaxSize(e){this._size=e,this.trim()}empty(){this._cachedBlocks.clear(),this.clearTimer()}getCurrentSize(){return this._cachedBlocks.size}updateTimer(){if(null!=this._timer)return;const e=this._cachedBlocks;this._timer=setInterval(()=>{const t=Array.from(e),i=Date.now();for(let s=0;s<t.length&&t[s][1].ts<=i-this._duration;s++)e.delete(t[s][0]);0===e.size&&this.clearTimer()},this._interval)}trim(){const e=this._cachedBlocks;if(-1===this._size||this._size>=e.size)return;const t=Array.from(e);for(let i=0;i<t.length-this._size;i++)e.delete(t[i][0])}clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}};function l(e,t){return null==t?e:`${e}?sliceId=${t}`}function c(e,t){const i={extent:null,rasterInfo:t,cache:new Map};if(a.has(e)){const t=a.get(e);return t.push(i),t.length-1}return a.set(e,[i]),0}function h(e,t){if(a.has(e)){const i=a.get(e);i[t]=null,i.some(e=>null!=e)||a.delete(e)}}function u(e,t,i){if(!a.has(e))return null==t?o.decreaseRefCount(e,i):0;const s=a.get(e);if(null==s[t])return o.decreaseRefCount(e,i);const r=s[t].cache;if(r.has(i)){const e=r.get(i);if(e.refCount--,0===e.refCount){r.delete(i);for(let e=0;e<s.length;e++)s[e]&&s[e].cache.has(i)&&s[e].cache.delete(i);e.controller&&e.controller.abort()}return e.refCount}return 0}function d(e,t,i){if(!a.has(e))return null==t?o.getBlock(e,i):null;const s=a.get(e);if(null==s[t]){for(let e=0;e<s.length;e++)if(s[e]&&s[e].cache.has(i)){const t=s[e].cache.get(i);return t.refCount++,t.block}return o.getBlock(e,i)}const r=s[t].cache;if(r.has(i)){const e=r.get(i);return e.refCount++,e.block}for(let e=0;e<s.length;e++)if(e!==t&&s[e]&&s[e]&&s[e].cache.has(i)){const t=s[e].cache.get(i);return t.refCount++,r.set(i,t),t.block}return null}function p(e,t,i,s,r=null){if(!a.has(e))return void(null==t&&o.putBlock(e,i,s,r));const n=a.get(e);if(null==n[t])return void o.putBlock(e,i,s,r);const l={refCount:1,block:s,isResolved:!1,isRejected:!1,controller:r};s.then(()=>l.isResolved=!0).catch(()=>l.isRejected=!0),n[t].cache.set(i,l)}function f(e,t,i){if(!a.has(e))return void(null==t&&o.deleteBlock(e,i));const s=a.get(e);null!=s[t]?s[t].cache.delete(i):o.deleteBlock(e,i)}function y(e,t,i,o,l,c,h=null){const u=function(e,t){if(!a.has(e))return null;const i=a.get(e);return null==i[t]?null:i[t]}(e,t),d=u.extent,{cache:p,rasterInfo:f}=u;if(d&&d.xmin===i.xmin&&d.xmax===i.xmax&&d.ymin===i.ymin&&d.ymax===i.ymax)return;const y=i.clone().normalize(),{spatialReference:m,transform:b}=f,g=new Set;for(let e=0;e<y.length;e++){const t=y[e];if(t.xmax-t.xmin<=o||t.ymax-t.ymin<=o)continue;let i=Object(r.h)(t,m,h);Object(s.k)(b)&&(i=b.inverseTransform(i));const a=new n.a({x:o,y:o,spatialReference:t.spatialReference});if(null==l&&!(l=Object(r.j)(a,m,t,h)))return;const{pyramidLevel:u,pyramidResolution:d,excessiveReading:p}=Object(r.m)(l,f,c||"closest");if(p)return;const{storageInfo:w}=f,{origin:x}=w,v={x:Math.max(0,Math.floor((i.xmin-x.x)/d.x)),y:Math.max(0,Math.floor((x.y-i.ymax)/d.y))},O=Math.ceil((i.xmax-i.xmin)/d.x-.1),_=Math.ceil((i.ymax-i.ymin)/d.y-.1),j=u>0?w.pyramidBlockWidth:w.blockWidth,R=u>0?w.pyramidBlockHeight:w.blockHeight,P=1,S=Math.max(0,Math.floor(v.x/j)-P),M=Math.max(0,Math.floor(v.y/R)-P),k=Math.floor((v.x+O-1)/j)+P,I=Math.floor((v.y+_-1)/R)+P;for(let e=M;e<=I;e++)for(let t=S;t<=k;t++)g.add(`${u}/${e}/${t}`)}p.forEach((e,t)=>{if(!g.has(t)){const e=p.get(t);(null==e||e.isResolved||e.isRejected)&&p.delete(t)}}),u.extent={xmin:i.xmin,ymin:i.ymin,xmax:i.xmax,ymax:i.ymax}}},1274:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return oe}));var s=i(337),r=i(397),n=i(343),a=i(345),o=i(373),l=i(341),c=(i(342),i(336),i(340),i(338)),h=i(990),u=i(439),d=i(339),p=i(371),f=i(600),y=i(566),m=i(391),b=i(1089),g=i(436);class w extends g.a{constructor(e,t,i,s,r,n=null){super(e,t,i,s,r),this.bitmap=new b.a(n,null,null),this.bitmap.coordScale=[s,r],this.bitmap.once("isReady",()=>this.ready())}destroy(){super.destroy(),this.bitmap.destroy(),this.bitmap=null,this.stage=null}set stencilRef(e){this.bitmap.stencilRef=e}get stencilRef(){return this.bitmap.stencilRef}setTransform(e,t){super.setTransform(e,t),this.bitmap.transforms.dvs=this.transforms.dvs}_createTransforms(){return{dvs:Object(m.b)(),tileMat3:Object(m.b)()}}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap.stage=null}}var x=i(349),v=i(443);class O extends v.a{constructor(){super(...arguments),this.isCustomTilingScheme=!1}createTile(e){const t=this._getTileBounds(e),[i,s]=this._tileInfoView.tileInfo.size;return new w(e,t[0],t[3],i,s)}destroyTile(){}prepareRenderPasses(e){const t=e.registerRenderPass({name:"imagery (tile)",brushes:[y.a.raster],target:()=>this.children.map(e=>e.bitmap),drawPhase:x.c.MAP});return[...super.prepareRenderPasses(e),t]}doRender(e){this.visible&&e.drawPhase===x.c.MAP&&super.doRender(e)}_getTileBounds(e){const t=this._tileInfoView.getTileBounds(Object(p.g)(),e);if(this.isCustomTilingScheme&&e.world){const{tileInfo:i}=this._tileInfoView,s=Object(f.o)(i.spatialReference);if(s){const{resolution:r}=i.lodAt(e.level),n=s/r%i.size[0],a=n?(i.size[0]-n)*r:0;t[0]-=a*e.world,t[2]-=a*e.world}}return t}}i(356);var _=i(383),j=i(368),R=i(563),P=i(426),S=i(1007),M=i(534),k=i(608),I=(i(587),i(503)),T=(i(396),i(555)),V=i(567),C=i(488),D=i(355);const z=[0,0],F=n.a.getLogger("esri.views.2d.layers.ImageryTileLayerView2D");let L=class extends _.a{constructor(){super(...arguments),this._emptyTilePixelBlock=null,this._tileStrategy=null,this._tileInfoView=null,this._fetchQueue=null,this._blockCacheRegistryUrl=null,this._blockCacheRegistryId=null,this._srcResolutions=null,this.previousLOD=null,this._needBlockCacheUpdate=!1,this._globalSymbolizerParams=null,this._symbolizerParams=null,this._abortController=null,this._isCustomTilingScheme=!1,this._globalUpdateRequested=!1,this.container=null,this.layer=null,this.redrawOrRefetch=Object(a.h)((e,t)=>!this.previousLOD||this.layerView.suspended?Promise.resolve():e?this.doRefresh():this._redrawImage(t))}get useWebGLForProcessing(){var e;return null==(e=this._get("useWebGLForProcessing"))||e}set useWebGLForProcessing(e){this._set("useWebGLForProcessing",e)}get useProgressiveUpdate(){return null==this._get("useProgressiveUpdate")||this._get("useProgressiveUpdate")}set useProgressiveUpdate(e){if(this._tileStrategy&&this.useProgressiveUpdate!==e){this._tileStrategy.destroy(),this.container.removeAllChildren();const t=this._getCacheSize(e);this._tileStrategy=new V.a({cachePolicy:"purge",acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:t,tileInfoView:this._tileInfoView}),this._set("useProgressiveUpdate",e),this.layerView.requestUpdate()}}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume();const{extent:t,resolution:i,scale:s}=e.state,r=this._tileInfoView.getClosestInfoForScale(s);if(this.layer.raster){var n;if(!this.useProgressiveUpdate||this._needBlockCacheUpdate){const e=this._srcResolutions[r.level],s=t.toJSON?t:D.a.fromJSON(t);Object(S.h)(this._blockCacheRegistryUrl,this._blockCacheRegistryId,s,i,e,this.layer.raster.ioConfig.sampling)}this._needBlockCacheUpdate=!1,(null==(n=this.previousLOD)?void 0:n.level)!==r.level&&(this.previousLOD=r,null==this._symbolizerParams||this.layerView.hasTilingEffects||this._updateSymbolizerParams(),this._tileStrategy.updateCacheSize(0))}}moveEnd(){!this.layerView.hasTilingEffects&&this.useProgressiveUpdate||(this._abortController&&this._abortController.abort(),this._abortController=new AbortController,0===this._fetchQueue.length&&this._redrawImage(this._abortController.signal).then(()=>{this._globalUpdateRequested=!1,this.layerView.requestUpdate()}));const e=this._getCacheSize(this.useProgressiveUpdate);this._tileStrategy.updateCacheSize(e),this.layerView.requestUpdate()}get updating(){return this._fetchQueue.length>0||this._globalUpdateRequested||!(!this.updatingHandles||!this.updatingHandles.updating)}attach(){Object(C.a)().supportsTextureFloat||(this.useWebGLForProcessing=!1),this._initializeTileInfo(),this._tileInfoView=new I.a(this.layerView.tileInfo,this.layerView.fullExtent);const e=this._computeFetchConcurrency();this._fetchQueue=new T.a({tileInfoView:this._tileInfoView,concurrency:e,process:(e,t)=>this._fetchTile1(e,t)});const t=this._getCacheSize(this.useProgressiveUpdate);this._tileStrategy=new V.a({cachePolicy:"purge",acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:t,tileInfoView:this._tileInfoView}),this._updateBlockCacheRegistry()}acquireTile(e){const t=this.container.createTile(e);return this._enqueueTileFetch(t),this.layerView.requestUpdate(),this._needBlockCacheUpdate=!0,this._globalUpdateRequested=this.layerView.hasTilingEffects||!this.useProgressiveUpdate,t}releaseTile(e){this._fetchQueue.abort(e.key.id),this.container.removeChild(e),e.once("detach",()=>{e.destroy(),this.layerView.requestUpdate()}),this.layerView.requestUpdate()}uninstall(){this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null,this.notifyChange("updating"),Object(S.g)(this._blockCacheRegistryUrl,this._blockCacheRegistryId)}createEmptyTilePixelBlock(e=null){const t=null==e||e.join(",")===this._tileInfoView.tileInfo.size.join(",");if(t&&Object(d.k)(this._emptyTilePixelBlock))return this._emptyTilePixelBlock;e=e||this._tileInfoView.tileInfo.size;const[i,s]=e,r=new R.a({width:i,height:s,pixels:[new Uint8Array(i*s)],mask:new Uint8Array(i*s),pixelType:"u8"});return t&&(this._emptyTilePixelBlock=r),r}_fetchTile1(e,t){const i=!Object(d.j)(t)&&t.signal,s=this.canUseWebGLForProcessing(),r={allowPartialFill:!0,datumTransformation:this.layerView.datumTransformation,interpolation:s?"nearest":this.layer.interpolation,registryId:this._blockCacheRegistryId,requestRawData:s,signal:Object(d.r)(i),srcResolution:this._srcResolutions[e.level],timeExtent:this.layerView.timeExtent,tileInfo:this.layerView.tileInfo};return this.fetchTile(e,r)}_getCacheSize(e){return e?40:0}_initializeTileInfo(){const e=this.layerView.view.spatialReference,t=new j.a({x:this.layerView.fullExtent.xmin,y:this.layerView.fullExtent.ymax,spatialReference:e}),{scales:i,srcResolutions:s,isCustomTilingScheme:r}=Object(k.a)(this.layer.rasterInfo,e),n=P.a.create({spatialReference:e,size:512,scales:i});(0===n.origin.x||n.origin.x>t.x)&&(n.origin=t),this._isCustomTilingScheme=r,this.layerView.set("tileInfo",n),this._srcResolutions=null!=s?s:[]}_computeFetchConcurrency(){const{blockBoundary:e}=this.layer.rasterInfo.storageInfo,t=e[e.length-1];return(t.maxCol-t.minCol+1)*(t.maxRow-t.minRow+1)>64?2:10}async _enqueueTileFetch(e,t){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);this.notifyChange("updating");const{bandIds:i}=this.layer;let s=!this.useProgressiveUpdate||this.layerView.hasTilingEffects&&!this._globalSymbolizerParams;if(this._globalUpdateRequested&&!this.layerView.moving&&0===this._fetchQueue.length){s=!1;try{await this._redrawImage(this._abortController&&this._abortController.signal)}catch(e){Object(a.l)(e)&&F.error(e)}this._globalUpdateRequested=!1}!this.canUseWebGLForProcessing()&&"rasterVF"!==this.type||this.layerView.hasTilingEffects||null!=this._symbolizerParams||this._updateSymbolizerParams();const r=this._tileInfoView.getTileCoords(z,e.key),n=this._tileInfoView.getTileResolution(e.key);await this.updateTileSource(e,{source:t,symbolizerParams:this._symbolizerParams,globalSymbolizerParams:this._globalSymbolizerParams,suspended:s,bandIds:i,coords:r,resolution:n}),e.once("attach",()=>this.layerView.requestUpdate()),this.container.addChild(e)}catch(e){Object(a.l)(e)||F.error(e)}this.layerView.requestUpdate()}}async _redrawImage(e){if(0===this.container.children.length)return;await this.updatingHandles.addPromise(this.layer.updateRenderer()),this.layerView.hasTilingEffects?await this._updateGlobalSymbolizerParams(e):(this._updateSymbolizerParams(),this._globalSymbolizerParams=null);const t=this.container.children.map(async e=>this.updateTileSymbolizerParameters(e,{local:this._symbolizerParams,global:this._globalSymbolizerParams}));await Object(a.i)(t),this.container.requestRender()}async _updateGlobalSymbolizerParams(e){const t={srcResolution:this._srcResolutions[this.previousLOD.level],registryId:this._blockCacheRegistryId,signal:e},i=await this.layer.fetchPixels(this.layerView.view.extent,this.layerView.view.width,this.layerView.view.height,t);if(!i||!i.pixelBlock)return;const s=this.layer.symbolizer.generateWebGLParameters({pixelBlock:Object(M.h)(i.pixelBlock,this.layer.bandIds),isGCS:this.layerView.view.spatialReference.isGeographic,resolution:{x:this.previousLOD.resolution,y:this.previousLOD.resolution},bandIds:this.layer.bandIds});!this.canUseWebGLForProcessing()&&s&&"stretch"===s.type&&this.layer.renderer&&"raster-stretch"===this.layer.renderer.type&&(s.factor=s.factor.map(e=>255*e),s.outMin=Math.round(255*s.outMin),s.outMax=Math.round(255*s.outMax)),this._globalSymbolizerParams=s}_updateSymbolizerParams(){this._symbolizerParams=this.layer.symbolizer.generateWebGLParameters({pixelBlock:null,isGCS:this.layerView.view.spatialReference.isGeographic,resolution:{x:this.previousLOD.resolution,y:this.previousLOD.resolution},bandIds:this.layer.bandIds})}_updateBlockCacheRegistry(e=!1){const{url:t,rasterInfo:i,raster:s}=this.layer,{multidimensionalDefinition:r}=this.layer.normalizeRasterFetchOptions({multidimensionalDefinition:this.layer.multidimensionalDefinition,timeExtent:this.layerView.timeExtent}),n=null!=i&&i.multidimensionalInfo?s.getSliceIndex(r):null,a=Object(S.d)(t,n);if(a!==this._blockCacheRegistryUrl){if(null!=this._blockCacheRegistryUrl&&Object(S.g)(this._blockCacheRegistryUrl,this._blockCacheRegistryId),this._blockCacheRegistryId=Object(S.f)(a,this.layer.raster.rasterInfo),e){const e=this._tileInfoView.getClosestInfoForScale(this.layerView.view.scale),t=this._srcResolutions[e.level];Object(S.h)(a,this._blockCacheRegistryId,this.layerView.view.extent,this.layerView.view.resolution,t,this.layer.raster.ioConfig.sampling)}this._blockCacheRegistryUrl=a}}async doRefresh(){await this.updatingHandles.addPromise(this.layer.updateRenderer()),this.layerView.hasTilingEffects||this._updateSymbolizerParams(),this._updateBlockCacheRegistry(!0),this._fetchQueue.reset(),this.notifyChange("updating");const e=[];this._tileStrategy.tiles.forEach(t=>e.push(this._enqueueTileFetch(t))),await Object(a.i)(e)}};Object(s.a)([Object(l.b)()],L.prototype,"_globalUpdateRequested",void 0),Object(s.a)([Object(l.b)()],L.prototype,"container",void 0),Object(s.a)([Object(l.b)()],L.prototype,"layer",void 0),Object(s.a)([Object(l.b)()],L.prototype,"layerView",void 0),Object(s.a)([Object(l.b)()],L.prototype,"type",void 0),Object(s.a)([Object(l.b)()],L.prototype,"useWebGLForProcessing",null),Object(s.a)([Object(l.b)()],L.prototype,"useProgressiveUpdate",null),Object(s.a)([Object(l.b)()],L.prototype,"updating",null),L=Object(s.a)([Object(c.a)("esri.views.2d.layers.imagery.BaseImageryTileSubView2D")],L);var U=i(484);let A=class extends L{constructor(){super(...arguments),this.container=null,this.layer=null,this.type="raster"}canUseWebGLForProcessing(){return this.useWebGLForProcessing&&this.layer.symbolizer.canRenderInWebGL&&!("majority"===this.layer.interpolation&&Object(U.a)(this.layer))}fetchTile(e,t){return this.layer.fetchTile(e.level,e.row,e.col,t)}async updateTileSource(e,t){const{bandIds:i}=this.layer,s=this._getLayerInterpolation(),r=this.canUseWebGLForProcessing(),{source:n,symbolizerParams:a,globalSymbolizerParams:o,suspended:l,coords:c,resolution:h}=t,{bitmap:u}=e;if([u.x,u.y]=c,u.resolution=h,n&&Object(d.k)(n)&&Object(d.k)(n.pixelBlock)){const e={extent:n.extent,pixelBlock:n.pixelBlock};if(u.rawPixelData=e,r)u.source=n.pixelBlock,u.isRendereredSource=!1;else{const t=await this.layer.applyRenderer(e,"stretch"===(null==o?void 0:o.type)?o:null);u.source=t,u.isRendereredSource=!0}u.symbolizerParameters=r?a:null,r?u.transformGrid||(u.transformGrid=n.transformGrid):u.transformGrid=null}else{const e=this.createEmptyTilePixelBlock();u.source=e,u.symbolizerParameters=r?a:null,u.transformGrid=null}u.bandIds=r?i:null,u.width=this._tileInfoView.tileInfo.size[0],u.height=this._tileInfoView.tileInfo.size[1],u.interpolation=s,u.suspended=l,u.invalidateTexture()}async updateTileSymbolizerParameters(e,t){const{local:i,global:s}=t,{bandIds:r}=this.layer,n=this._getLayerInterpolation(),a=this.canUseWebGLForProcessing(),{bitmap:o}=e,{rawPixelData:l}=o;!a&&Object(d.k)(l)?(o.source=await this.layer.applyRenderer(l,"stretch"===(null==s?void 0:s.type)?s:null),o.isRendereredSource=!0):(o.isRendereredSource&&Object(d.k)(l)&&(o.source=l.pixelBlock),o.isRendereredSource=!1),o.symbolizerParameters=a?s||i:null,o.bandIds=a?r:null,o.interpolation=n,o.suspended=!1}install(e){this.container=new O(this._tileInfoView),this.container.isCustomTilingScheme=this._isCustomTilingScheme,e.addChild(this.container)}uninstall(){this.container.removeAllChildren(),this.container.remove(),super.uninstall()}_getLayerInterpolation(){const e=this.layer.renderer.type;if("raster-colormap"===e||"unique-value"===e||"class-breaks"===e)return"nearest";const{interpolation:t}=this.layer,{renderer:i}=this.layer;return"raster-stretch"===i.type&&null!=i.colorRamp?"bilinear"===t||"cubic"===t?"bilinear":"nearest":t}};Object(s.a)([Object(l.b)()],A.prototype,"container",void 0),Object(s.a)([Object(l.b)()],A.prototype,"layer",void 0),Object(s.a)([Object(l.b)()],A.prototype,"type",void 0),A=Object(s.a)([Object(c.a)("esri.views.2d.layers.imagery.ImageryTileView2D")],A);const B=A;var q=i(609),E=i(384),G=i(377),W=(i(379),i(381),i(375),i(388),i(369),i(376)),N=i(407),H=i(354);class Q extends N.a{constructor(e=null){super(),this._source=null,this._symbolizerParameters=null,this._vaoInvalidated=!0,this.coordScale=[1,1],this.height=null,this.stencilRef=0,this.rawPixelData=null,this.width=null,this.source=e}destroy(){var e,t;Object(d.k)(this.vaoData)&&(null==(e=this.vaoData.magdir)||e.vao.dispose(),null==(t=this.vaoData.scalar)||t.vao.dispose(),this.vaoData=null)}get symbolizerParameters(){return this._symbolizerParameters}set symbolizerParameters(e){JSON.stringify(this._symbolizerParameters)!==JSON.stringify(e)&&(this._symbolizerParameters=e,this.invalidateVAO())}get source(){return this._source}set source(e){this._source=e,this.invalidateVAO()}invalidateVAO(){var e,t;!this._vaoInvalidated&&Object(d.k)(this.vaoData)&&(null==(e=this.vaoData.magdir)||e.vao.dispose(),null==(t=this.vaoData.scalar)||t.vao.dispose(),this.vaoData=null,this._vaoInvalidated=!0,this.requestRender())}updateVectorFieldVAO(e){if(this._vaoInvalidated){if(this._vaoInvalidated=!1,Object(d.k)(this.source)&&!Object(d.k)(this.vaoData)){const{style:t}=this.symbolizerParameters;switch(t){case"beaufort_ft":case"beaufort_km":case"beaufort_kn":case"beaufort_m":case"beaufort_mi":case"classified_arrow":case"ocean_current_kn":case"ocean_current_m":case"single_arrow":{const t=Object(q.c)(this.source,this.symbolizerParameters),i=this._createVectorFieldVAO(e.context,t);this.vaoData={magdir:i}}break;case"simple_scalar":{const t=Object(q.d)(this.source,this.symbolizerParameters),i=this._createVectorFieldVAO(e.context,t);this.vaoData={scalar:i}}break;case"wind_speed":{const t=Object(q.c)(this.source,this.symbolizerParameters),i=this._createVectorFieldVAO(e.context,t),s=Object(q.d)(this.source,this.symbolizerParameters),r=this._createVectorFieldVAO(e.context,s);this.vaoData={magdir:i,scalar:r}}}}this.ready(),this.requestRender()}}_createTransforms(){return{dvs:Object(m.b)()}}onAttach(){this.invalidateVAO()}onDetach(){this.invalidateVAO()}_createVectorFieldVAO(e,t){const{vertexData:i,indexData:s}=t,r=G.a.createVertex(e,35044,new Float32Array(i)),n=G.a.createIndex(e,35044,new Uint32Array(s)),a=Object(H.g)("vector-field",{geometry:[{location:0,name:"a_pos",count:2,type:5126,normalized:!1},{location:1,name:"a_offset",count:2,type:5126,normalized:!1},{location:2,name:"a_vv",count:2,type:5126,normalized:!1}]});return{vao:new W.a(e,a.attributes,a.bufferLayouts,{geometry:r},n),elementCount:s.length}}}class J extends g.a{constructor(e,t,i,s,r,n=null){super(e,t,i,s,r),this.tileData=new Q(n),this.tileData.coordScale=[s,r],this.tileData.once("isReady",()=>this.ready())}destroy(){super.destroy(),this.tileData.destroy(),this.tileData=null,this.stage=null}set stencilRef(e){this.tileData.stencilRef=e}get stencilRef(){return this.tileData.stencilRef}_createTransforms(){return{dvs:Object(m.b)(),tileMat3:Object(m.b)()}}setTransform(e,t){super.setTransform(e,t);const i=t/(e.resolution*e.pixelRatio),s=this.transforms.tileMat3,[r,n]=this.tileData.offset,a=[this.x+r*t,this.y-n*t],[o,l]=e.toScreenNoRotation([0,0],a),{symbolTileSize:c}=this.tileData.symbolizerParameters,h=Math.round((this.width-this.tileData.offset[0])/c)*c,u=Math.round((this.height-this.tileData.offset[1])/c)*c,d=h/this.rangeX*i,p=u/this.rangeY*i;Object(E.k)(s,d,0,0,0,p,0,o,l,1),Object(E.h)(this.transforms.dvs,e.displayViewMat3,s),this.tileData.transforms.dvs=this.transforms.dvs}onAttach(){this.tileData.stage=this.stage}onDetach(){this.tileData.stage=null}}var X=i(1091);class $ extends v.a{constructor(){super(...arguments),this.isCustomTilingScheme=!1,this.symbolTypes=["triangle"]}createTile(e){const t=this._tileInfoView.getTileBounds(Object(p.g)(),e),[i,s]=this._tileInfoView.tileInfo.size;return new J(e,t[0],t[3],i,s)}destroyTile(){}prepareRenderPasses(e){const t=e.registerRenderPass({name:"imagery (vf tile)",brushes:[X.a],target:()=>this.children.map(e=>e.tileData),drawPhase:x.c.MAP});return[...super.prepareRenderPasses(e),t]}doRender(e){this.visible&&e.drawPhase===x.c.MAP&&this.symbolTypes.forEach(t=>{e.renderPass=t,super.doRender(e)})}}let Y=class extends L{constructor(){super(...arguments),this._handle=null,this.container=null,this.layer=null,this.type="rasterVF"}canUseWebGLForProcessing(){return!1}async fetchTile(e,t){const i=await this.layer.fetchTile(e.level,e.row,e.col,t);return"vector-magdir"===this.layer.rasterInfo.dataType&&null!=i&&i.pixelBlock&&(i.pixelBlock=await this.layer.convertVectorFieldData(i.pixelBlock,t)),i}updateTileSource(e,t){const i=t.symbolizerParams,{tileData:s}=e;s.key=e.key,s.width=this._tileInfoView.tileInfo.size[0],s.height=this._tileInfoView.tileInfo.size[1];const{symbolTileSize:r}=i,{source:n}=t;if(s.offset=this._getTileSymbolOffset(s.key,r),Object(d.k)(n)&&Object(d.k)(n.pixelBlock)){const e={extent:n.extent,pixelBlock:n.pixelBlock};s.rawPixelData=e,s.source=this._sampleVectorFieldData(n.pixelBlock,i,s.offset),s.symbolizerParameters=i}else{const e=[Math.round((this._tileInfoView.tileInfo[0]-s.offset[0])/r),Math.round((this._tileInfoView.tileInfo[1]-s.offset[1])/r)],t=this.createEmptyTilePixelBlock(e);s.source=t,s.symbolizerParameters=i}return s.invalidateVAO(),Promise.resolve(null)}updateTileSymbolizerParameters(e,t){var i;const s=t.local,{symbolTileSize:r}=s,{tileData:n}=e;n.offset=this._getTileSymbolOffset(n.key,r);const a=n.symbolizerParameters.symbolTileSize;return n.symbolizerParameters=s,Object(d.k)(null==(i=n.rawPixelData)?void 0:i.pixelBlock)&&a!==r&&(n.source=this._sampleVectorFieldData(n.rawPixelData.pixelBlock,n.symbolizerParameters,n.offset)),Promise.resolve(null)}install(e){this.container=new $(this._tileInfoView),this.container.isCustomTilingScheme=this._isCustomTilingScheme,this._updateSymbolType(this.layer.renderer),this._handle=this.layer.watch("renderer",e=>this._updateSymbolType(e)),e.addChild(this.container)}uninstall(){this.container.removeAllChildren(),this._handle.remove(),this._handle=null,this.container.remove(),super.uninstall()}_getTileSymbolOffset(e,t){const i=e.col*this._tileInfoView.tileInfo.size[0]%t,s=e.row*this._tileInfoView.tileInfo.size[1]%t;return[i>t/2?t-i:-i,s>t/2?t-s:-s]}_sampleVectorFieldData(e,t,i){const{symbolTileSize:s}=t;return Object(q.f)(e,"vector-uv",s,i)}_updateSymbolType(e){"vector-field"===e.type&&(this.container.symbolTypes="wind-barb"===e.style?["scalar","triangle"]:"simple-scalar"===e.style?["scalar"]:["triangle"])}};Object(s.a)([Object(l.b)()],Y.prototype,"container",void 0),Object(s.a)([Object(l.b)()],Y.prototype,"layer",void 0),Object(s.a)([Object(l.b)()],Y.prototype,"type",void 0),Y=Object(s.a)([Object(c.a)("esri.views.2d.layers.imagery.VectorFieldTileView2D")],Y);const K=Y;var Z=i(344),ee=i(412),te=i(676);const ie=e=>{let t=class extends e{constructor(){super(...arguments),this._rasterFieldPrefix="Raster.",this.layer=null,this.view=null,this.fullExtent=null,this.tileInfo=null,this.datumTransformation=null}get hasTilingEffects(){return this.layer.renderer&&"dynamicRangeAdjustment"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment}async fetchPopupFeatures(e,t){const{layer:i}=this;if(!e)return Promise.reject(new Z.a("imageryTileLayerView:fetchPopupFeatures","Nothing to fetch without area",{layer:i}));const{popupEnabled:s}=i,n=Object(te.a)(i,t);if(!s||!Object(d.k)(n))throw new Z.a("imageryTileLayerView:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:s,popupTemplate:n});const a=[],{value:o,magdirValue:l}=await i.identify(e,{timeExtent:this.timeExtent});let c="";if(o&&o.length){var h,u;c="imagery-tile"===i.type&&i.hasStandardTime()&&null!=o[0]?o.map(e=>i.getStandardTimeValue(e)).join(", "):o.join(", ");const e={ObjectId:0},t="Raster.ServicePixelValue";e[t]=this._formatAttributeValue(c,t);const s=null==(h=i.rasterInfo)||null==(u=h.attributeTable)?void 0:u.features;if(s&&s.length>0){const t=s.filter(e=>{const t=e.attributes.value||e.attributes.Value||e.attributes.VALUE;return String(t)===c});if(t.length>0){const i=t[0];if(i)for(const t in i.attributes)if(i.attributes.hasOwnProperty(t)){const s=this._rasterFieldPrefix+t;e[s]=this._formatAttributeValue(i.attributes[t],s)}}}const n=i.rasterInfo.dataType;"vector-magdir"!==n&&"vector-uv"!==n||(e["Raster.Magnitude"]=null==l?void 0:l[0],e["Raster.Direction"]=null==l?void 0:l[1]);const d=new r.a(this.fullExtent.clone(),null,e);d.layer=i,d.sourceLayer=d.layer,a.push(d)}return a}updateFullExtent(){const e=this.layer.tileInfo;if(!e||!e.spatialReference)return Promise.reject(new Z.a("layerview:tiling-information-missing","The layer doesn't provide tiling information",{layer:this.layer}));if(Object(d.j)(this.layer.fullExtent))return Promise.reject(new Z.a("layerview:extent-missing","The layer doesn't provide a full extent.",{layer:this.layer}));const t=Object(k.b)(this.layer.fullExtent,this.view.spatialReference,!1),i=Object(k.h)(this.layer.fullExtent,this.view.spatialReference,t);return null==i?Promise.reject(new Z.a("layerview:projection-not-supported","The layer extent cannot be projected to the view's spatial reference",{layer:this.layer})):(this._set("fullExtent",i),this.datumTransformation||(this.datumTransformation=Object(k.b)(this.layer.fullExtent,this.view.spatialReference,!0)),Promise.resolve())}_formatAttributeValue(e,t){if("string"==typeof e){const i=this.layer.popupTemplate&&this.layer.popupTemplate.fieldInfos,s=this._getFieldInfo(i,t),r=s&&s.format;if(r){let t,i;return e.trim().indexOf(",")>-1?(t=",",i=t+" ",this._formatDelimitedString(e,t,i,r)):e.trim().indexOf(" ")>-1?(t=i=" ",this._formatDelimitedString(e,t,i,r)):this._formatNumberFromString(e,r)}}return e}_getFieldInfo(e,t){if(!e||!e.length||!t)return;const i=t.toLowerCase();let s;return e.some(e=>!(!e.fieldName||e.fieldName.toLowerCase()!==i&&e.fieldName.toLowerCase()!==i.replace(/ /g,"_")||(s=e,0))),s}_formatDelimitedString(e,t,i,s){return e&&t&&i&&s?e.trim().split(t).map(e=>this._formatNumberFromString(e,s)).join(i):e}_formatNumberFromString(e,t){if(!e||!t)return e;const i=Number(e);return isNaN(i)?e:t.format(i)}};return Object(s.a)([Object(l.b)()],t.prototype,"layer",void 0),Object(s.a)([Object(l.b)(ee.a)],t.prototype,"timeExtent",void 0),Object(s.a)([Object(l.b)()],t.prototype,"view",void 0),Object(s.a)([Object(l.b)()],t.prototype,"fullExtent",void 0),Object(s.a)([Object(l.b)()],t.prototype,"tileInfo",void 0),Object(s.a)([Object(l.b)({readOnly:!0})],t.prototype,"hasTilingEffects",null),t=Object(s.a)([Object(c.a)("esri.views.layers.ImageryTileLayerView")],t),t};var se=i(438),re=i(546);const ne=n.a.getLogger("esri.views.2d.layers.ImageryTileLayerView2D");let ae=class extends(ie(Object(re.a)(Object(u.a)(se.a)))){constructor(){super(...arguments),this._useWebGLForProcessing=!0,this._useProgressiveUpdate=!0,this.subview=null}initialize(){const e=this.updateFullExtent();this.addResolvingPromise(e)}get useWebGLForProcessing(){return this._useWebGLForProcessing}set useWebGLForProcessing(e){this._useWebGLForProcessing=e,this.subview&&"useWebGLForProcessing"in this.subview&&(this.subview.useWebGLForProcessing=e)}get useProgressiveUpdate(){return this._useWebGLForProcessing}set useProgressiveUpdate(e){this._useProgressiveUpdate=e,this.subview&&"useProgressiveUpdate"in this.subview&&(this.subview.useProgressiveUpdate=e)}update(e){this.subview.update(e),this.notifyChange("updating")}isUpdating(){return!this.subview||this.subview.updating}attach(){this.layer.increaseRasterJobHandlerUsage(),this._updateSubview(),this.handles.add([Object(o.d)(this.layer,["bandIds","renderer","interpolation","multidimensionalDefinition"],(e,t,i)=>{const s="multidimensionalDefinition"===i,r="interpolation"===i&&("majority"===e||"majority"===t)&&Object(U.a)(this.layer),n="renderer"===i&&t.type!==e.type;n&&this._updateSubview();const o=s||r||n;this.subview.redrawOrRefetch(o).catch(e=>{Object(a.l)(e)||ne.error(e)}),this.notifyChange("updating")}),Object(o.a)(this,["layer.blendMode"],e=>{this.subview&&(this.subview.container.blendMode=e)},!0),Object(o.a)(this,["layer.effect"],e=>{this.subview&&(this.subview.container.effect=e)},!0),Object(o.a)(this,"timeExtent",()=>{this.subview.redrawOrRefetch(!0).catch(e=>{Object(a.l)(e)||ne.error(e)})})],"attach")}detach(){this.handles.remove("attach"),this.layer.decreaseRasterJobHandlerUsage(),this.subview.uninstall()}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.subview.moveEnd()}async hitTest(e,t){return[new r.a({attributes:{},geometry:e.clone()})]}doRefresh(){return this.subview.doRefresh()}_updateSubview(){const e="vector-field"===this.layer.renderer.type?"rasterVF":"animated-flow"===this.layer.renderer.type?"rasterAnimatedFlow":"raster";if(this.subview){if(this.subview.type===e)return;this.subview.uninstall()}const{layer:t}=this;let i;i="rasterVF"===e?new K({layer:t,layerView:this}):"rasterAnimatedFlow"===e?new h.a({layer:t,layerView:this}):new B({layer:t,layerView:this}),"useWebGLForProcessing"in i&&(i.useWebGLForProcessing=this._useWebGLForProcessing),"useProgressiveUpdate"in i&&(i.useProgressiveUpdate=this._useProgressiveUpdate),"previousLOD"in i&&(i.previousLOD=this.subview&&"previousLOD"in this.subview&&this.subview.previousLOD),i.attach(),i.install(this.container),i.container.blendMode=t.blendMode,i.container.effect=t.effect,this.subview=i,this.requestUpdate()}};Object(s.a)([Object(l.b)()],ae.prototype,"subview",void 0),Object(s.a)([Object(l.b)()],ae.prototype,"useWebGLForProcessing",null),Object(s.a)([Object(l.b)()],ae.prototype,"useProgressiveUpdate",null),ae=Object(s.a)([Object(c.a)("esri.views.2d.layers.ImageryTileLayerView2D")],ae);const oe=ae},436:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i(384),r=i(407),n=i(396);class a extends r.a{constructor(e,t,i,s,r,a=s,o=r){super(),this.triangleCountReportedInDebug=0,this.triangleCount=0,this.texture=null,this.key=new n.a(e),this.x=t,this.y=i,this.width=s,this.height=r,this.rangeX=a,this.rangeY=o}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}setTransform(e,t){const i=t/(e.resolution*e.pixelRatio),r=this.transforms.tileMat3,[n,a]=e.toScreenNoRotation([0,0],[this.x,this.y]),o=this.width/this.rangeX*i,l=this.height/this.rangeY*i;Object(s.k)(r,o,0,0,0,l,0,n,a,1),Object(s.h)(this.transforms.dvs,e.displayViewMat3,r)}}},438:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var s=i(337),r=i(359),n=i(399),a=i(383),o=i(444),l=i(343),c=i(339),h=i(464),u=i(341),d=(i(342),i(336),i(340),i(338));let p=class extends(Object(a.b)(Object(o.a)(Object(h.b)(n.a.EventedMixin(r.a))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch(e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",i=this.layer&&this.layer.title||"no title";throw l.a.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${i}', id: '${t}')`,e),e}})}get fullOpacity(){return Object(c.s)(this.get("layer.opacity"),1)*Object(c.s)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var e;return!0===(null==(e=this.layer)?void 0:e.visible)}set visible(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")}canResume(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};Object(s.a)([Object(u.b)()],p.prototype,"fullOpacity",null),Object(s.a)([Object(u.b)()],p.prototype,"layer",void 0),Object(s.a)([Object(u.b)()],p.prototype,"parent",void 0),Object(s.a)([Object(u.b)({readOnly:!0})],p.prototype,"suspended",null),Object(s.a)([Object(u.b)({readOnly:!0})],p.prototype,"suspendInfo",null),Object(s.a)([Object(u.b)({readOnly:!0})],p.prototype,"legendEnabled",null),Object(s.a)([Object(u.b)({type:Boolean,readOnly:!0})],p.prototype,"updating",null),Object(s.a)([Object(u.b)({readOnly:!0})],p.prototype,"updatingProgress",null),Object(s.a)([Object(u.b)()],p.prototype,"visible",null),p=Object(s.a)([Object(d.a)("esri.views.layers.LayerView")],p);const f=p},439:function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var s=i(337),r=i(372),n=i(451),a=i(373),o=i(341),l=(i(342),i(336),i(340),i(338)),c=i(497),h=i(347);i(343),i(394);let u=class extends h.a{};u=Object(s.a)([Object(l.a)("esri.views.layers.support.ClipArea")],u);const d=u;var p;let f=p=class extends d{constructor(){super(...arguments),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new p({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get("version")||0)+1}};Object(s.a)([Object(o.b)({type:[Number,String],json:{write:!0}})],f.prototype,"left",void 0),Object(s.a)([Object(o.b)({type:[Number,String],json:{write:!0}})],f.prototype,"right",void 0),Object(s.a)([Object(o.b)({type:[Number,String],json:{write:!0}})],f.prototype,"top",void 0),Object(s.a)([Object(o.b)({type:[Number,String],json:{write:!0}})],f.prototype,"bottom",void 0),Object(s.a)([Object(o.b)({readOnly:!0})],f.prototype,"version",null),f=p=Object(s.a)([Object(l.a)("esri.views.layers.support.ClipRect")],f);const y=f;i(356);var m,b=i(403),g=i(351),w=i(355),x=i(386);const v={base:b.a,key:"type",typeMap:{extent:w.a,polygon:x.a}};let O=m=class extends d{constructor(){super(...arguments),this.type="geometry",this.geometry=null}get version(){return(this._get("version")||0)+1}clone(){return new m({geometry:this.geometry.clone()})}};Object(s.a)([Object(o.b)({types:v,json:{read:g.a,write:!0}})],O.prototype,"geometry",void 0),Object(s.a)([Object(o.b)({readOnly:!0})],O.prototype,"version",null),O=m=Object(s.a)([Object(l.a)("esri.views.layers.support.Geometry")],O);const _=O;let j=class extends d{constructor(){super(...arguments),this.type="path",this.path=[]}get version(){return(this._get("version")||0)+1}};Object(s.a)([Object(o.b)({type:[[[Number]]],json:{write:!0}})],j.prototype,"path",void 0),Object(s.a)([Object(o.b)({readOnly:!0})],j.prototype,"version",null),j=Object(s.a)([Object(l.a)("esri.views.layers.support.Path")],j);const R=j,P=r.a.ofType({key:"type",base:d,typeMap:{rect:y,path:R,geometry:_}}),S=e=>{let t=class extends e{constructor(){super(...arguments),this.clips=new P,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var e;this.container||(this.container=new c.a),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([Object(a.a)(this,"suspended",e=>{this.container&&(this.container.visible=!e),this.view&&!e&&this.updateRequested&&this.view.requestUpdate()},!0),Object(a.a)(this,["layer.opacity","container"],()=>{var e,t;this.container&&(this.container.opacity=null!=(e=null==(t=this.layer)?void 0:t.opacity)?e:1)},!0),Object(a.a)(this,["layer.blendMode"],e=>{this.container&&(this.container.blendMode=e)},!0),Object(a.a)(this,["layer.effect"],e=>{this.container&&(this.container.effect=e)},!0),this.clips.on("change",()=>{this.container.clips=this.clips,this.notifyChange("clips")})]),null!=(e=this.view)&&e.whenLayerView?this.view.whenLayerView(this.layer).then(e=>{e!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{}):this.when().then(()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{})}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!(!this.updatingHandles||!this.updatingHandles.updating)}isVisibleAtScale(e){let t=!0;const i=this.layer,s=i.minScale,r=i.maxScale;if(null!=s&&null!=r){let i=!s,n=!r;!i&&e<=s&&(i=!0),!n&&e>=r&&(n=!0),t=i&&n}return t}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1}hitTest(e,t){return Promise.resolve(null)}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return Object(s.a)([Object(o.b)({type:P,set(e){const t=Object(n.b)(e,this._get("clips"),P);this._set("clips",t)}})],t.prototype,"clips",void 0),Object(s.a)([Object(o.b)()],t.prototype,"moving",void 0),Object(s.a)([Object(o.b)()],t.prototype,"attached",void 0),Object(s.a)([Object(o.b)()],t.prototype,"container",void 0),Object(s.a)([Object(o.b)()],t.prototype,"suspended",void 0),Object(s.a)([Object(o.b)({readOnly:!0})],t.prototype,"updateParameters",void 0),Object(s.a)([Object(o.b)()],t.prototype,"updateRequested",void 0),Object(s.a)([Object(o.b)()],t.prototype,"updating",null),Object(s.a)([Object(o.b)()],t.prototype,"view",void 0),t=Object(s.a)([Object(l.a)("esri.views.2d.layers.LayerView2D")],t),t}},443:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i(336),r=i(349),n=i(480),a=i(550),o=i(542);const l=(e,t)=>e.key.level-t.key.level!=0?e.key.level-t.key.level:e.key.row-t.key.row!=0?e.key.row-t.key.row:e.key.col-t.key.col;class c extends n.a{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(l),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:t}=e,i=super.createRenderParams(e);return i.requiredLevel=this._tileInfoView.getClosestInfoForScale(t.scale).level,i.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(t.scale),i}prepareRenderPasses(e){const t=super.prepareRenderPasses(e);return t.push(e.registerRenderPass({name:"stencil",brushes:[o.a],drawPhase:r.c.DEBUG|r.c.MAP|r.c.HIGHLIGHT,target:()=>this.getStencilTarget()})),Object(s.a)("esri-tiles-debug")&&t.push(e.registerRenderPass({name:"tileInfo",brushes:[a.a],drawPhase:r.c.DEBUG,target:()=>this.children})),t}getStencilTarget(){return this.children}updateTransforms(e){for(const t of this.children){const i=this._tileInfoView.getTileResolution(t.key);t.setTransform(e,i)}}setStencilReference(){let e=1;for(const t of this.children)t.stencilRef=e++}}},484:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r}));const s=new(i(361).a)({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function r(e){return s.toJSON(e)}function n(e){const{bandCount:t,attributeTable:i,colormap:s,pixelType:r}=e.rasterInfo;return 1===t&&(null!=i||null!=s||"u8"===r||"s8"===r)}},546:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i(337),r=i(343),n=i(345),a=i(373),o=i(341),l=(i(342),i(336),i(340),i(338));const c=e=>{let t=class extends e{initialize(){this.handles.add(Object(a.b)(this,"layer","refresh",e=>{this.doRefresh(e.dataChanged).catch(e=>{Object(n.l)(e)||r.a.getLogger(this.declaredClass).error(e)})}),"RefreshableLayerView")}};return Object(s.a)([Object(o.b)()],t.prototype,"layer",void 0),t=Object(s.a)([Object(l.a)("esri.layers.mixins.RefreshableLayerView")],t),t}},608:function(e,t,i){"use strict";i.d(t,"a",(function(){return T})),i.d(t,"b",(function(){return y})),i.d(t,"c",(function(){return S})),i.d(t,"d",(function(){return P})),i.d(t,"e",(function(){return O})),i.d(t,"f",(function(){return R})),i.d(t,"g",(function(){return f})),i.d(t,"h",(function(){return x})),i.d(t,"i",(function(){return g})),i.d(t,"j",(function(){return m})),i.d(t,"k",(function(){return h})),i.d(t,"l",(function(){return k})),i.d(t,"m",(function(){return I}));i(356);var s=i(344),r=i(339),n=i(406),a=i(433),o=i(355),l=i(368);const c=5e-4;function h(e,t,i){return!Object(a.a)(e,t,i)}function u(e,t,i){const r=h(e,t,i);if(r&&!Object(a.e)())throw new s.a("rasterprojectionhelper-project","projection engine is not loaded");return r}const d=function(e,t,i){const s=(e[0]+e[4]+e[4*t.cols]+e[4*t.cols+4])/4,r=(e[1]+e[5]+e[4*t.rows+1]+e[4*t.rows+5])/4,n=(e[4*t.cols]-e[0]+e[4*t.cols+4]-e[4])/i[0]*.5,a=(e[4*t.cols+1]-e[1]+e[4*t.cols+5]-e[5])/i[1]*.5;return[0===n||isNaN(n)?0:Math.abs(s-e[2*t.rows+2])/Math.abs(n),0===a||isNaN(a)?0:Math.abs(r-e[2*t.rows+3])/Math.abs(a)]},p={3395:20037508.342789244,3410:17334193.943686873,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53034:20015086.79602057,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54034:20037508.342789244,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244};async function f(){if(Object(a.e)())return null;await Object(a.f)()}function y(e,t,i){return u(e.spatialReference,t)?i?Object(a.c)(t,e.spatialReference,e):Object(a.c)(e.spatialReference,t,e):null}function m(e,t,i,s=null){if(e.spatialReference.equals(t))return e;u(e.spatialReference,t,s);const n=i.center,l=new o.a({xmin:n.x-e.x/2,xmax:n.x+e.x/2,ymin:n.y-e.y/2,ymax:n.y+e.y/2,spatialReference:e.spatialReference}),c=Object(a.g)(l,t,s);return Object(r.j)(c)?null:{x:c.xmax-c.xmin,y:c.ymax-c.ymin}}function b(e,t=.01){return Object(n.d)(e)?t/Object(n.d)(e):0}function g(e,t,i=null,s=!0){const r=e.spatialReference;if(r.equals(t))return e;u(r,t,i);const n=Object(a.g)(e,t,i);if(s&&t.isGeographic){const[t,i]=_(r,!0),s=b(r);s&&null!=t&&null!=i&&(Math.abs(e.x-t)<s&&Math.abs(180-n.x)<c?n.x-=360:Math.abs(e.x-i)<s&&Math.abs(180+n.x)<c&&(n.x+=360))}return n}function w(e){const t=O(e[0].spatialReference);if(e.length<2||!Object(r.k)(t))return e[0];let{xmin:i,xmax:s,ymin:n,ymax:a}=e[0];for(let i=1;i<e.length;i++){const r=e[i];s=r.xmax+t*i,n=Math.min(n,r.ymin),a=Math.max(a,r.ymax)}return new o.a({xmin:i,xmax:s,ymin:n,ymax:a,spatialReference:e[0].spatialReference})}function x(e,t,i=null,s=!0){if(e.spatialReference.equals(t))return e;const n=R(e),a=O(e.spatialReference,!0);return Object(r.k)(a)&&0!==n?w(e.clone().normalize().map(e=>v(e,t,i,s))):v(e,t,i,s)}function v(e,t,i=null,s=!0){const r=e.spatialReference;if(r.equals(t))return e;u(r,t,i);const n=Object(a.g)(e,t,i);let[o,h]=_(r,!0);if(n&&s&&r.isWebMercator&&t.isGeographic&&null!=o&&null!=h){const s=.001,a=1e3;if(Math.abs(e.xmin-o)<s&&Math.abs(h-e.xmax)>a&&Math.abs(180-n.xmax)<c){n.xmin=-180;const s=[];s.push(new l.a(e.xmax,e.ymin,r)),s.push(new l.a(e.xmax,(e.ymin+e.ymax)/2,r)),s.push(new l.a(e.xmax,e.ymax,r));const a=s.map(e=>g(e,t,i)).filter(e=>!isNaN(null==e?void 0:e.x)).map(e=>e.x);n.xmax=Math.max.apply(null,a)}if(Math.abs(e.xmax-h)<s&&Math.abs(o-e.xmin)>a&&Math.abs(180+n.xmin)<c){n.xmax=180;const s=[];s.push(new l.a(e.xmin,e.ymin,r)),s.push(new l.a(e.xmin,(e.ymin+e.ymax)/2,r)),s.push(new l.a(e.xmin,e.ymax,r));const a=s.map(e=>g(e,t,i)).filter(e=>!isNaN(null==e?void 0:e.x)).map(e=>e.x);n.xmin=Math.min.apply(null,a)}}[o,h]=_(t,!0);const d=b(t);return d&&null!=o&&null!=h&&n&&(Math.abs(n.xmin-o)<d&&(n.xmin=o),Math.abs(n.xmax-h)<d&&(n.xmax=h)),n}function O(e,t=!1){const i=t?20037508.342787:20037508.342788905;return e.isWebMercator?2*i:e.wkid&&e.isGeographic?360:2*p[e.wkid]||null}function _(e,t=!1){const i=[],s=O(e,t);return Object(r.k)(s)&&(i.push(-s/2),i.push(s/2)),i}function j(e,t,i,s){let r=(e-t)/i;return r-Math.floor(r)!=0?r=Math.floor(r):s&&(r-=1),r}function R(e,t=!1){const i=O(e.spatialReference);if(!Object(r.k)(i))return 0;const s=t?0:-i/2;return j(e.xmax,s,i,!0)-j(e.xmin,s,i,!1)}function P(e){const t=e.storageInfo.origin.x,i=O(e.spatialReference,!0);if(!Object(r.k)(i))return{originX:t,halfWorldWidth:null,pyramidsInfo:null};const s=i/2,{nativePixelSize:n,storageInfo:a,extent:o}=e,{maximumPyramidLevel:l,blockWidth:c,pyramidScalingFactor:h}=a;let u=n.x;const d=[],p=Object(r.k)(e.transform)&&"gcs-shift"===e.transform.type,f=t+(p?0:s),y=p?i-t:s-t;for(let e=0;e<=l;e++){const e=(o.xmax-t)/u/c,i=e-Math.floor(e)==0?e:Math.ceil(e),s=y/u/c,r=s-Math.floor(s)==0?s:Math.ceil(s),n=Math.floor(f/u/c),a=Math.round(f/u)%c,l=(c-Math.round(y/u)%c)%c;d.push({resolutionX:u,blockWidth:c,datsetColumnCount:i,worldColumnCountFromOrigin:r,leftMargin:a,rightPadding:l,originColumnOffset:n}),u*=h}return{originX:t,halfWorldWidth:s,pyramidsInfo:d,hasGCSSShiftTransform:p}}function S(e){const t=e.isAdaptive&&null==e.spacing,i=e.spacing||[32,32];let s=M(e),r={cols:s.size[0]+1,rows:s.size[1]+1},n=d(s.offsets,r,i);const a=(n[0]+n[1])/2,o=s.outofBoundPointCount>0&&s.outofBoundPointCount<s.offsets.length/2;return t&&(o||a>4)&&(s=M({...e,spacing:[4,4]}),r={cols:s.size[0]+1,rows:s.size[1]+1},n=d(s.offsets,r,i)),s.error=n,s.coefficients=function(e,t,i){const{cols:s,rows:r}=t,n=new Float32Array((s-1)*(r-1)*2*6),a=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),o=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let t=0;t<s-1;t++){for(let i=0;i<r-1;i++){let l=t*r*2+2*i;const c=e[l],h=e[l+1],u=e[l+2],d=e[l+3];l+=2*r;const p=e[l],f=e[l+1],y=e[l+2],m=e[l+3];let b=0,g=12*(i*(s-1)+t);for(let e=0;e<3;e++)n[g++]=a[b++]*c+a[b++]*u+a[b++]*y;b=0;for(let e=0;e<3;e++)n[g++]=a[b++]*h+a[b++]*d+a[b++]*m;b=0;for(let e=0;e<3;e++)n[g++]=o[b++]*c+o[b++]*p+o[b++]*y;b=0;for(let e=0;e<3;e++)n[g++]=o[b++]*h+o[b++]*f+o[b++]*m}if(i)for(let e=0;e<n.length;e++)isNaN(n[e])&&(n[e]=-1)}return n}(s.offsets,r,o),s}function M(e){const{projectedExtent:t,srcBufferExtent:i,pixelSize:s,datumTransformation:n,rasterTransform:o}=e,c=t.spatialReference,h=i.spatialReference;u(c,h);const{xmin:d,ymin:p,xmax:f,ymax:y}=t,m=O(h),b=e.hasWrapAround||"gcs-shift"===(null==o?void 0:o.type),g=e.spacing||[32,32],w={x:g[0]*s.x,y:g[1]*s.y},x=Math.ceil((f-d)/w.x-.1/g[0])+1,v=Math.ceil((y-p)/w.y-.1/g[1])+1,_=w.x,j=w.y,R=[];let P,S=0;const M=[];for(let e=0;e<x;e++)for(let t=0;t<v;t++)M.push(new l.a({x:d+_*e,y:y-j*t,spatialReference:c}));const k=function(e,t,i=null){const s=e[0].spatialReference;return s.equals(t)?e:(u(s,t,i),Object(a.g)(e,t,i))}(M,h,n);for(let e=0;e<x;e++){const t=[];for(let s=0;s<v;s++){let n=k[e*v+s];o&&(n=o.inverseTransform(n)),t.push(n),e>0&&b&&n&&P[s]&&Object(r.k)(m)&&n.x<P[s].x&&(n.x+=m),n?(R.push((n.x-i.xmin)/(i.xmax-i.xmin)),R.push((i.ymax-n.y)/(i.ymax-i.ymin))):(R.push(NaN),R.push(NaN),S++)}P=t}return{offsets:R,error:null,coefficients:null,outofBoundPointCount:S,spacing:g,size:[x-1,v-1]}}function k(e){const t=e.clone().normalize();return 1===t.length?t[0]:w(t)}function I(e,t,i){const{storageInfo:s,pixelSize:n}=t;let a,o=!1;const{pyramidResolutions:c}=s;if(Object(r.k)(c)&&c.length){const s=(e.x+e.y)/2,r=c[c.length-1],h=(r.x+r.y)/2,u=(n.x+n.y)/2;if(s<=u)a=0;else if(s>=h)a=c.length,o=s/h>8;else{let e,t=u;for(let r=1;r<=c.length;r++){if(e=(c[r-1].x+c[r-1].y)/2,s<=e){s===e?a=r:"down"===i?(a=r-1,o=s/t>8):a="up"===i||s-t>e-s||s/t>2?r:r-1;break}t=e}}const d=0===a?n:c[a-1];return{pyramidLevel:a,pyramidResolution:new l.a({x:d.x,y:d.y,spatialReference:t.spatialReference}),excessiveReading:o}}const h=Math.log(e.x/n.x)/Math.LN2,u=Math.log(e.y/n.y)/Math.LN2,d=t.storageInfo.maximumPyramidLevel||0;a="down"===i?Math.floor(Math.min(h,u)):"up"===i?Math.ceil(Math.max(h,u)):Math.round((h+u)/2),a<0?a=0:a>d&&(o=a>d+3,a=d);const p=2**a;return{pyramidLevel:a,pyramidResolution:new l.a({x:p*t.nativePixelSize.x,y:p*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:o}}function T(e,t,i=512,s=!0){const{extent:r,spatialReference:a,pixelSize:o}=e,c=m(new l.a({x:o.x,y:o.y,spatialReference:a}),t,r);if(null==c)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const h=(c.x+c.y)/2,u=Object(n.d)(t),d=h*u*96*39.37,p=t.isGeographic?256/i*295828763.7958547:256/i*591657527.591555;let f="vector-magdir"===e.dataType||"vector-uv"===e.dataType;const y=x(r,t);f||s&&(t.isGeographic||t.isWebMercator)&&(f=y.xmin*y.xmax<0);let b,g=d;const w=1.001;if(f){g=p;const e=t.isGeographic?1341104507446289e-21:.29858214164761665,i=e*(96*u*39.37),s=t.isGeographic?4326:3857;b=m(new l.a({x:e,y:e,spatialReference:{wkid:s}}),a,y),b.x*=g/i,b.y*=g/i}else{b={x:o.x,y:o.y};const t=Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2);let i=0;for(;g<p*(w/2)&&i<t;)i++,g*=2,b.x*=2,b.y*=2;Math.max(g,p)/Math.min(g,p)<=w&&(g=p)}const v=[g],O=[{x:b.x,y:b.y}],_=Math.min(70.5310735,d)/w;for(;g>=_;)g/=2,b.x/=2,b.y/=2,v.push(g),O.push({x:b.x,y:b.y});return{projectedPixelSize:c,scales:v,srcResolutions:O,isCustomTilingScheme:!f}}},609:function(e,t,i){"use strict";i.d(t,"a",(function(){return f})),i.d(t,"b",(function(){return y})),i.d(t,"c",(function(){return S})),i.d(t,"d",(function(){return P})),i.d(t,"e",(function(){return h})),i.d(t,"f",(function(){return M})),i.d(t,"g",(function(){return m})),i.d(t,"h",(function(){return c})),i.d(t,"i",(function(){return d}));var s=i(361),r=i(339),n=i(563),a=i(534);const o=new Map;o.set("meter-per-second",1),o.set("kilometer-per-hour",.277778),o.set("knots",.514444),o.set("feet-per-second",.3048),o.set("mile-per-hour",.44704);const l=180/Math.PI,c=new s.a({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});function h(e,t){return o.get(e)/o.get(t)||1}function u(e){return(450-e)%360}function d(e,t="geographic"){const[i,s]=e,r=Math.sqrt(i*i+s*s);let n=Math.atan2(s,i)*l;return n=(360+n)%360,"geographic"===t&&(n=u(n)),[r,n]}function p(e,t="geographic"){let i=e[1];"geographic"===t&&(i=u(i)),i%=360;const s=e[0];return[s*Math.cos(i/l),s*Math.sin(i/l)]}function f(e,t,i="geographic",s=1){if(!Object(a.i)(e))return e;const{pixels:r,width:o,height:l}=e,c=o*l,h=r[0],u=r[1],f=n.a.createEmptyBand(e.pixelType,c),y=n.a.createEmptyBand(e.pixelType,c);let m=0;for(let e=0;e<l;e++)for(let e=0;e<o;e++)"vector-uv"===t?([f[m],y[m]]=d([h[m],u[m]],i),f[m]*=s):([f[m],y[m]]=p([h[m],u[m]],i),f[m]*=s,y[m]*=s),m++;const b=new n.a({pixelType:e.pixelType,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:[f,y]});return b.updateStatistics(),b}function y(e,t,i=1){if(1===i||!Object(a.i)(e))return e;const s=e.clone(),{pixels:r,width:n,height:o}=s,l=r[0],c=r[1];let h=0;for(let e=0;e<o;e++)for(let e=0;e<n;e++)"vector-uv"===t?(l[h]*=i,c[h]*=i):l[h]*=i,h++;return s.updateStatistics(),s}function m(e,t,i,s,n){if(!Object(r.k)(n)||!n.spatialReference.equals(e.spatialReference))return{extent:e,width:t,height:i,resolution:e.width/t};const a=n.xmin,o=n.ymax;s=Math.max(s||0,30);const l=Math.ceil(t*(1/s)),c=Math.ceil(i*(1/s)),h=((e.xmax-e.xmin)/l+(e.ymax-e.ymin)/c)/2;return e.xmin=a+Math.floor((e.xmin-a)/h)*h,e.xmax=a+Math.ceil((e.xmax-a)/h)*h,e.ymin=o+Math.floor((e.ymin-o)/h)*h,e.ymax=o+Math.ceil((e.ymax-o)/h)*h,{extent:e,width:Math.round(e.width/h),height:Math.round(e.height/h),resolution:h}}const b=function(e=0,t=0,i=Math.PI,s=!0){s&&(i=(2*Math.PI-i)%(2*Math.PI));const r=s?-1:1,n=13*r,a=-7*r,o=-2*r,l=-16*r,c=29,[h,u]=w(0,t+n,i,c),[d,p]=w(e-5.5,t+a,i,c),[f,y]=w(e+5.5,t+a,i,c),[m,b]=w(e-1.5,t+o,i,c),[g,x]=w(e+1.5,t+o,i,c),[v,O]=w(e-1.5,t+l,i,c),[_,j]=w(e+1.5,t+l,i,c);return[h,u,d,p,m,b,g,x,f,y,v,O,_,j]}(0,0,0);function g(e=0,t=Math.PI,i=!0){i&&(t=(2*Math.PI-t)%(2*Math.PI));const s=i?-1:1,r=5*s,n=20*s,a=25*s,o=45,l=2*s;let[c,h]=[5,0-n],[u,d]=[c+2,h],[p,f]=[u-0,d+l],[y,m]=[-5,0-a],[b,g]=[y+0,m-l],x=Math.ceil(e/5),v=Math.floor(x/10);x-=8*v;const O=[],_=[];for(let e=0;e<x/2;e++,v--){v<=0&&x%2==1&&e===(x-1)/2&&(y=0,b=y+0,m=(m+h)/2,g=m-l);const[i,s]=w(y,m,t,o);if(v>0){const[e,r]=w(u,m,t,o),[n,a]=w(c,h,t,o);O.push(e),O.push(r),O.push(i),O.push(s),O.push(n),O.push(a)}else{const[e,r]=w(u,d,t,o),[n,a]=w(p,f,t,o),[l,c]=w(b,g,t,o);_.push(i),_.push(s),_.push(l),_.push(c),_.push(n),_.push(a),_.push(e),_.push(r)}m+=r,h+=r,d+=r,f+=r,g+=r}const[j,R]=w(5,0+n,t,o),[P,S]=w(7,0+n,t,o),[M,k]=w(5,0-a,t,o),[I,T]=w(7,0-a,t,o);return{pennants:O,barbs:_,shaft:[j,R,P,S,M,k,I,T]}}function w(e,t,i,s=1){const r=Math.sqrt(e*e+t*t)/s,n=(2*Math.PI+Math.atan2(t,e))%(2*Math.PI);return[r,(2*Math.PI+n-i)%(2*Math.PI)]}const x=[0,1,3,6,10,16,21,27,33,40,47,55,63],v=[0,.5,1,1.5,2],O=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function _(e,t,i,s){const r=h(s||"knots",i);let n;for(n=1;n<t.length;n++)if(n===t.length-1){if(e<t[n]*r)break}else if(e<=t[n]*r)break;return Math.min(n-1,t.length-2)}function j(e,t,i,s,r){let n=0;switch(t){case"beaufort_kn":n=_(e,x,"knots",i);break;case"beaufort_km":n=_(e,x,"kilometer-per-hour",i);break;case"beaufort_ft":n=_(e,x,"feet-per-second",i);break;case"beaufort_m":n=_(e,x,"meter-per-second",i);break;case"classified_arrow":n=_(e,r,s,i);break;case"ocean_current_m":n=_(e,v,"meter-per-second",i);break;case"ocean_current_kn":n=_(e,O,"knots",i)}return n}const R=[];function P(e,t){let i=0,s=0;const{width:r,height:n,mask:a}=e,o=e.pixels[0],l=[],c=[],h="wind_speed"===t.style?5:Number.MAX_VALUE;for(let e=0;e<n;e++)for(let t=0;t<r;t++){const u=e*r+t;if((!a||a[e*r+t])&&o[u]<h){for(let s=0;s<4;s++)l[i++]=(t+.5)/r,l[i++]=(e+.5)/n,l[i++]=s<2?-.5:.5,l[i++]=s%2==0?-.5:.5,l[i++]=0,l[i++]=o[u];const a=4*(i/24-1);c[s++]=a,c[s++]=a+1,c[s++]=a+2,c[s++]=a+1,c[s++]=a+2,c[s++]=a+3}}return{vertexData:new Float32Array(l),indexData:new Uint32Array(c)}}function S(e,t){return"simple_scalar"===t.style?P(e,t):"wind_speed"===t.style?function(e,t){if(0===R.length)for(let e=0;e<30;e++)R.push(g(5*e,0));const i=h(c.fromJSON(t.inputUnit),"knots"),{width:s,height:r,mask:n}=e,a=e.pixels[0],o=e.pixels[1],l=[],u=[];let d=0,p=0;for(let e=0;e<r;e++)for(let t=0;t<s;t++){const c=e*s+t,h=a[c]*i;if((!n||n[e*s+t])&&h>=5){var f;const i=null!=(f=(o[c]+360)%360/180*Math.PI)?f:2*Math.PI*Math.random(),{pennants:n,barbs:a,shaft:y}=R[Math.min(Math.floor(h/5),29)];if(n.length+a.length===0)continue;let m=l.length/6;const b=(t+.5)/s,g=(e+.5)/r;for(let e=0;e<n.length;e+=2)l[d++]=b,l[d++]=g,l[d++]=n[e],l[d++]=n[e+1]+i,l[d++]=0,l[d++]=h;for(let e=0;e<a.length;e+=2)l[d++]=b,l[d++]=g,l[d++]=a[e],l[d++]=a[e+1]+i,l[d++]=0,l[d++]=h;for(let e=0;e<y.length;e+=2)l[d++]=b,l[d++]=g,l[d++]=y[e],l[d++]=y[e+1]+i,l[d++]=0,l[d++]=h;for(let e=0;e<n.length/6;e++)u[p++]=m,u[p++]=m+1,u[p++]=m+2,m+=3;for(let e=0;e<a.length/8;e++)u[p++]=m,u[p++]=m+1,u[p++]=m+2,u[p++]=m+1,u[p++]=m+2,u[p++]=m+3,m+=4;u[p++]=m+0,u[p++]=m+1,u[p++]=m+2,u[p++]=m+1,u[p++]=m+3,u[p++]=m+2,m+=4}}return{vertexData:new Float32Array(l),indexData:new Uint32Array(u)}}(e,t):function(e,t){const{style:i,inputUnit:s,outputUnit:r,breakValues:n}=t,a=c.fromJSON(s),o=c.fromJSON(r);let l=0,h=0;const{width:u,height:d,mask:p}=e,f=e.pixels[0],y=e.pixels[1],m=p?p.filter(e=>e>0).length:u*d,g=new Float32Array(42*m),w=new Uint32Array(15*m);for(let e=0;e<d;e++)for(let t=0;t<u;t++){const s=e*u+t;if(!p||p[e*u+t]){var x;const r=null!=(x=(y[s]+360)%360/180*Math.PI)?x:2*Math.PI*Math.random(),c=j(f[s],i,a,o,n);for(let i=0;i<b.length;i+=2)g[l++]=(t+.5)/u,g[l++]=(e+.5)/d,g[l++]=b[i],g[l++]=b[i+1]+r,g[l++]=c,g[l++]=f[s];const p=7*(l/42-1);w[h++]=p,w[h++]=p+1,w[h++]=p+2,w[h++]=p+0,w[h++]=p+4,w[h++]=p+3,w[h++]=p+0,w[h++]=p+2,w[h++]=p+3,w[h++]=p+2,w[h++]=p+5,w[h++]=p+3,w[h++]=p+5,w[h++]=p+6,w[h++]=p+3}}return{vertexData:g,indexData:w}}(e,t)}function M(e,t,i,s=[0,0],r=.5){const{width:a,height:o,mask:l}=e,[c,h]=e.pixels,[u,f]=s,y=Math.round((a-u)/i),m=Math.round((o-f)/i),b=y*m,g=new Float32Array(b),w=new Float32Array(b),x=new Uint8Array(b),v="vector-uv"===t;for(let e=0;e<m;e++)for(let t=0;t<y;t++){let s=0;const n=e*y+t,m=Math.max(0,e*i+f),b=Math.max(0,t*i+u),O=Math.min(o,m+i),_=Math.min(a,b+i);for(let e=m;e<O;e++)for(let t=b;t<_;t++){const i=e*a+t;if(!l||l[i]){s++;const e=v?[c[i],h[i]]:[c[i],(360+h[i])%360],[t,r]=v?e:p(e);g[n]+=t,w[n]+=r}}if(s>=(O-m)*(_-b)*(1-r)){x[n]=1;const[e,t]=d([g[n]/s,w[n]/s]);g[n]=e,w[n]=t}else x[n]=0,g[n]=0,w[n]=0}const O=new n.a({width:y,height:m,pixels:[g,w],mask:x});return O.updateStatistics(),O}},675:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return b}));i(356);var s=i(343),r=i(378),n=i(339),a=i(345),o=i(659),l=i(374),c=i(355);const h=s.a.getLogger("esri.views.2d.engine.flow.dataUtils");async function u(e,t,i){const s=performance.now(),r=d(e,t),n=performance.now(),l=f(e,r,t.width,t.height),c=performance.now(),u=function(e,t){const i=new o.a,s=e.reduce((e,t)=>e+t.length,0),r=new Float32Array(3*s),n=new Array(e.length);let a=0,l=0;for(const s of e){const e=a;for(const e of s)r[3*a+0]=e.x,r[3*a+1]=e.y,r[3*a+2]=e.t,a++;n[l++]={startVertex:e,numberOfVertices:s.length,totalTime:s[s.length-1].t,timeSeed:t?i.getFloat():0}}return{lineVertices:r,lineDescriptors:n}}(l,!0),p=performance.now(),m=y(u),b=performance.now();if(e.profile){const e={"_createFlowFieldFromData()":Math.round(n-s),"_getStreamlines()":Math.round(c-n),"createAnimatedLinesData()":Math.round(p-c),"createLinesMesh()":Math.round(b-p),"Total elapsed time":Math.round(b-s)};h.info("createStreamlinesMesh profile",e)}return await Promise.resolve(),Object(a.u)(i),m}function d(e,t){const i=function(e,t,i,s){if(0===s)return e;const r=Math.round(3*s),n=new Array(2*r+1);let a=0;for(let e=-r;e<=r;e++){const t=Math.exp(-e*e/(s*s));n[e+r]=t,a+=t}for(let e=-r;e<=r;e++)n[e+r]/=a;const o=new Float32Array(e.length);for(let s=0;s<i;s++)for(let i=0;i<t;i++){let a=0,l=0;for(let o=-r;o<=r;o++){if(i+o<0||i+o>=t)continue;const c=n[o+r];a+=c*e[2*(s*t+(i+o))+0],l+=c*e[2*(s*t+(i+o))+1]}o[2*(s*t+i)+0]=a,o[2*(s*t+i)+1]=l}const l=new Float32Array(e.length);for(let e=0;e<t;e++)for(let s=0;s<i;s++){let a=0,c=0;for(let l=-r;l<=r;l++){if(s+l<0||s+l>=i)continue;const h=n[l+r];a+=h*o[2*((s+l)*t+e)+0],c+=h*o[2*((s+l)*t+e)+1]}l[2*(s*t+e)+0]=a,l[2*(s*t+e)+1]=c}return l}(t.data,t.width,t.height,e.smoothing);return e.interpolate?(e,s)=>{const r=Math.floor(e),n=Math.floor(s);if(r<0||r>=t.width)return[0,0];if(n<0||n>=t.height)return[0,0];const a=e-r,o=s-n,l=r,c=n,h=r<t.width-1?r+1:r,u=n<t.height-1?n+1:n,d=i[2*(c*t.width+l)],p=i[2*(c*t.width+h)],f=i[2*(u*t.width+l)],y=i[2*(u*t.width+h)],m=i[2*(c*t.width+l)+1],b=i[2*(c*t.width+h)+1];return[(d*(1-o)+f*o)*(1-a)+(p*(1-o)+y*o)*a,(m*(1-o)+i[2*(u*t.width+l)+1]*o)*(1-a)+(b*(1-o)+i[2*(u*t.width+h)+1]*o)*a]}:(e,s)=>{const r=Math.round(e),n=Math.round(s);return r<0||r>=t.width||n<0||n>=t.height?[0,0]:[i[2*(n*t.width+r)+0],i[2*(n*t.width+r)+1]]}}function p(e,t,i,s,r,n,a,o,l){const c=[];let h,u,d=i,p=s,f=0;c.push({x:d,y:p,t:f});for(let i=0;i<e.verticesPerLine;i++){let[i,s]=t(d,p);i*=e.velocityScale,s*=e.velocityScale;const y=Math.sqrt(i*i+s*s);if(y<e.minSpeedThreshold)return c;const m=i/y,b=s/y;if(d+=m*e.segmentLength,p+=b*e.segmentLength,f+=e.segmentLength/y,Math.acos(m*h+b*u)>e.maxTurnAngle)return c;if(e.mergeLines){const e=Math.round(d*l),t=Math.round(p*l);if(e<0||e>a-1||t<0||t>o-1)return c;const i=n[t*a+e];if(-1!==i&&i!==r)return c;n[t*a+e]=r}c.push({x:d,y:p,t:f}),h=m,u=b}return c}function f(e,t,i,s){const r=[],n=new o.a,a=1/Math.max(e.lineCollisionWidth,1),l=Math.round(i*a),c=Math.round(s*a),h=new Int32Array(l*c);for(let e=0;e<h.length;e++)h[e]=-1;const u=[];for(let t=0;t<s;t+=e.lineSpacing)for(let s=0;s<i;s+=e.lineSpacing)u.push({x:s,y:t,sort:n.getFloat()});u.sort((e,t)=>e.sort-t.sort);for(const{x:i,y:s}of u)if(n.getFloat()<e.density){const n=p(e,t,i,s,r.length,h,l,c,a);if(n.length<2)continue;r.push(n)}return r}function y(e,t=10){const{lineVertices:i,lineDescriptors:s}=e;let r=0,n=0;for(const e of s)r+=2*e.numberOfVertices,n+=6*(e.numberOfVertices-1);const a=new Float32Array(8*r),o=new Uint32Array(n);let l=0,c=0;function h(){o[c++]=l-2,o[c++]=l,o[c++]=l-1,o[c++]=l,o[c++]=l+1,o[c++]=l-1}function u(e,t,i,s,r,n,o){const c=8*l;let h=0;a[c+h++]=e,a[c+h++]=t,a[c+h++]=1,a[c+h++]=i,a[c+h++]=n,a[c+h++]=o,a[c+h++]=s,a[c+h++]=r,l++,a[c+h++]=e,a[c+h++]=t,a[c+h++]=-1,a[c+h++]=i,a[c+h++]=n,a[c+h++]=o,a[c+h++]=-s,a[c+h++]=-r,l++}for(const e of s){const{totalTime:s,timeSeed:r}=e;let n=null,a=null,o=null,l=null,c=null;for(let d=0;d<e.numberOfVertices;d++){const p=i[3*(e.startVertex+d)+0],f=i[3*(e.startVertex+d)+1],y=i[3*(e.startVertex+d)+2];let m=null,b=null,g=null,w=null;if(d>0){m=p-n,b=f-a;const e=Math.sqrt(m*m+b*b);if(m/=e,b/=e,d>1){let e=m+l,i=b+c;const s=Math.sqrt(e*e+i*i);e/=s,i/=s;const r=Math.min(1/(e*m+i*b),t);e*=r,i*=r,g=-i,w=e}else g=-b,w=m;null!==g&&null!==w&&(u(n,a,o,g,w,s,r),h())}n=p,a=f,o=y,l=m,c=b}u(n,a,o,-c,l,s,r)}return{vertexData:a,indexData:o}}function m(e,t){const i=t.pixels,{width:s,height:n}=t,a=new Float32Array(s*n*2);if("vector-uv"===e)for(let e=0;e<s*n;e++)a[2*e+0]=i[0][e],a[2*e+1]=-i[1][e];else if("vector-magdir"===e)for(let e=0;e<s*n;e++){const t=i[0][e],s=Object(r.f)(i[1][e]),n=Math.cos(s-Math.PI/2),o=Math.sin(s-Math.PI/2);a[2*e+0]=n*t,a[2*e+1]=o*t}return{data:a,width:s,height:n}}async function b(e,t,i,s,r){const n=Object(l.e)(t.spatialReference);if(!n)return g(e,t,i,s,r);const[a,o]=n.valid,h=o-a,u=Math.ceil(t.width/h),d=t.width/u,p=Math.round(i/u);let f=t.xmin;const y=[];for(let i=0;i<u;i++){const i=new c.a({xmin:f,xmax:f+d,ymin:t.ymin,ymax:t.ymax,spatialReference:t.spatialReference});y.push(g(e,i,p,s,r)),f+=d}const m=await Promise.all(y),b={data:new Float32Array(i*s*2),width:i,height:s};let w=0;for(const e of m){for(let t=0;t<e.height;t++)for(let s=0;s<e.width;s++)w+s>=i||(b.data[2*(t*i+w+s)+0]=e.data[2*(t*e.width+s)+0],b.data[2*(t*i+w+s)+1]=e.data[2*(t*e.width+s)+1]);w+=e.width}return b}async function g(e,t,i,s,r){if("imagery"===e.type){await e.load({signal:r});const a=e.rasterInfo.dataType,o=await e.fetchImage(t,i,s,{signal:r});return!o||Object(n.j)(o.pixelData)||Object(n.j)(o.pixelData.pixelBlock)?{data:new Float32Array(i*s*2),width:i,height:s}:m(a,o.pixelData.pixelBlock)}await e.load({signal:r});const a=e.rasterInfo.dataType,o=await e.fetchPixels(t,i,s,{signal:r});return!o||Object(n.j)(o.pixelBlock)?{data:new Float32Array(i*s*2),width:i,height:s}:m(a,o.pixelBlock)}},676:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return n}));var s=i(339),r=i(402);async function n(e,t=e.popupTemplate){if(!Object(s.k)(t))return[];const i=await t.getRequiredFields(e.fieldsIndex),{lastEditInfoEnabled:n}=t,{objectIdField:a,typeIdField:o,globalIdField:l,relationships:c}=e;if(i.includes("*"))return["*"];const h=n?await Object(r.n)(e):[],u=Object(r.j)(e.fieldsIndex,[...i,...h]);return o&&u.push(o),u&&a&&e.fieldsIndex.has(a)&&-1===u.indexOf(a)&&u.push(a),u&&l&&e.fieldsIndex.has(l)&&-1===u.indexOf(l)&&u.push(l),c&&c.forEach(t=>{const{keyField:i}=t;u&&i&&e.fieldsIndex.has(i)&&-1===u.indexOf(i)&&u.push(i)}),u}function a(e,t){return e.popupTemplate?e.popupTemplate:Object(s.k)(t)&&t.defaultPopupTemplateEnabled&&Object(s.k)(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}},990:function(e,t,i){"use strict";i.d(t,"a",(function(){return C}));var s=i(337),r=i(359),n=i(341),a=(i(342),i(336),i(340),i(338)),o=i(675),l=i(947),c=i(349),h=i(480);class u extends h.a{constructor(){super(...arguments),this.flowStyle=null}get requiresDedicatedFBO(){return!1}doRender(e){super.doRender(e)}prepareRenderPasses(e){const t=e.registerRenderPass({name:"flow",brushes:[l.a],target:()=>this.children,drawPhase:c.c.MAP});return[...super.prepareRenderPasses(e),t]}}i(356);var d=i(343),p=i(378),f=i(339),y=i(345),m=i(368);const b=d.a.getLogger("esri.views.2d.engine.flow.FlowDisplayData");class g{constructor(e,t,i,s){this.state={name:"created"},this.flowStyle=e,this.extent=t,this.size=i,this.pixelRatio=s}async load(){const e=new AbortController;this.state={name:"loading",abortController:e};const t=await this.flowStyle.loadResources({extent:this.extent,size:this.size,pixelRatio:this.pixelRatio},e.signal);this.state={name:"loaded",resources:t}}prepareForRendering(e,t,i){if("loaded"!==this.state.name)return void b.error("Only loaded resources can be attached.");const s=this.state.resources;s.prepareForRendering(e,t,i),this.state={name:"attached",resources:s}}destroy(){if("loading"===this.state.name)return this.state.abortController.abort(),void(this.state={name:"detached"});"attached"===this.state.name&&(this.state.resources.detach(),this.state={name:"detached"})}update(e){return!!this.flowStyle.areResourcesCompatible(e.flowStyle)&&!(!this.extent.equals(e.extent)||this.size[0]!==e.size[0]||this.size[1]!==e.size[1]||this.pixelRatio!==e.pixelRatio||(this.flowStyle=e.flowStyle,0))}}var w=i(384),x=i(391),v=i(407);class O extends v.a{constructor(){super(...arguments),this._displayData=null}get displayData(){return this._displayData}set displayData(e){this._displayData=e,this.requestRender()}clear(){Object(f.k)(this._displayData)&&(this._displayData.destroy(),this._displayData=null,this.requestRender())}setTransform(e){const{displayData:t}=this;if(Object(f.j)(t))return;const i=t.extent.xmin,s=t.extent.ymax,r=[0,0];e.toScreen(r,[i,s]);const n=(t.extent.xmax-t.extent.xmin)/t.size[0]/e.resolution,a=Object(p.f)(e.rotation),{dvs:o}=this.transforms;Object(w.b)(o),Object(w.c)(o,o,[-1,1,0]),Object(w.d)(o,o,[2/(e.size[0]*e.pixelRatio),-2/(e.size[1]*e.pixelRatio),1]),Object(w.c)(o,o,[r[0],r[1],0]),Object(w.j)(o,o,a),Object(w.d)(o,o,[n*e.pixelRatio,n*e.pixelRatio,1])}_createTransforms(){return{dvs:Object(x.b)()}}}var _=i(355);const j=d.a.getLogger("esri.views.2d.engine.flow.FlowStrategy");let R=class extends r.a{constructor(e){super(e),this._flowDisplayObject=new O,this._loading=null}initialize(){this.flowContainer.addChild(this._flowDisplayObject)}destroy(){this._clear(),this.flowContainer.removeAllChildren()}get updating(){return null!=this._loading}update(e){const{flowStyle:t}=this.flowContainer;if(Object(f.j)(t))return void this._clear();const{extent:i,rotation:s,resolution:r,pixelRatio:n}=e.state,a=function(e,t){const i=new m.a({x:(e.xmax+e.xmin)/2,y:(e.ymax+e.ymin)/2,spatialReference:e.spatialReference}),s=e.xmax-e.xmin,r=e.ymax-e.ymin,n=Math.abs(Math.cos(Object(p.f)(t))),a=Math.abs(Math.sin(Object(p.f)(t))),o=n*s+a*r,l=a*s+n*r,c=new _.a({xmin:i.x-o/2,ymin:i.y-l/2,xmax:i.x+o/2,ymax:i.y+l/2,spatialReference:e.spatialReference});return c.centerAt(i),c}(i,s);a.expand(1.15);const o=[Math.round((a.xmax-a.xmin)/r),Math.round((a.ymax-a.ymin)/r)],l=new g(t,a,o,n);if(Object(f.k)(this._loading)){if(this._loading.update(l))return;this._loading.destroy(),this._loading=null}!Object(f.j)(this._flowDisplayObject.displayData)&&this._flowDisplayObject.displayData.update(l)||(l.load().then(()=>{this._flowDisplayObject.clear(),this._flowDisplayObject.displayData=this._loading,this._loading=null},e=>{Object(y.l)(e)||(j.error("A resource failed to load.",e),this._loading=null)}),this._loading=l)}_clear(){this._flowDisplayObject.clear(),Object(f.k)(this._loading)&&(this._loading.destroy(),this._loading=null)}};Object(s.a)([Object(n.b)()],R.prototype,"_loading",void 0),Object(s.a)([Object(n.b)()],R.prototype,"flowContainer",void 0),Object(s.a)([Object(n.b)()],R.prototype,"updating",null),R=Object(s.a)([Object(a.a)("esri.views.2d.engine.flow.FlowStrategy")],R);const P=R;var S=i(348);var M=i(377),k=(i(379),i(381),i(375),i(388),i(369),i(376));class I{constructor(e,t){this._vertexData=e,this._indexData=t}prepareForRendering(e,t,i){const s=M.a.createVertex(e,35044,this._vertexData),r=M.a.createIndex(e,35044,this._indexData),n=new k.a(e,t,i,{geometry:s},r);this.vertexBuffer=s,this.indexBuffer=r,this.vertexArray=n,this._vertexData=null,this._indexData=null}detach(){this.vertexArray.dispose(),this.vertexBuffer.dispose(),this.indexBuffer.dispose()}}class T{constructor(e,t,i){this._loadImagery=e,this._createStreamlinesMesh=t,this._rendererSettings=function(e){const t=Object(S.c)(e.lineWidth),i=2*t,s=Math.round(Object(S.c)(e.lineLength)/i)+1,r=t,n=e.lineColor.toRgba(),a=[n[0]/255,n[1]/255,n[2]/255,n[3]],{lineSpeed:o,fadeDuration:l,density:c}=e;return{lineRenderWidth:t,segmentLength:i,verticesPerLine:s,lineCollisionWidth:r,lineSpacing:10,lineColor:a,lineSpeed:o,fadeDuration:l,density:c,smoothing:Object(S.c)(e.smoothing),velocityScale:1,minWeightThreshold:.001,minSpeedThreshold:.001,maxTurnAngle:1,mergeLines:!0,interpolate:!0,profile:!1}}(i)}get animated(){return this._rendererSettings.lineSpeed>0}get renderSettings(){return this._rendererSettings}areResourcesCompatible(e){let t=!0;return t=t&&e._loadImagery===this._loadImagery,t=t&&e._createStreamlinesMesh===this._createStreamlinesMesh,t=t&&e._rendererSettings.verticesPerLine===this._rendererSettings.verticesPerLine,t=t&&e._rendererSettings.segmentLength===this._rendererSettings.segmentLength,t=t&&e._rendererSettings.lineSpacing===this._rendererSettings.lineSpacing,t=t&&e._rendererSettings.density===this._rendererSettings.density,t=t&&e._rendererSettings.smoothing===this._rendererSettings.smoothing,t=t&&e._rendererSettings.velocityScale===this._rendererSettings.velocityScale,t=t&&e._rendererSettings.minWeightThreshold===this._rendererSettings.minWeightThreshold,t=t&&e._rendererSettings.minSpeedThreshold===this._rendererSettings.minSpeedThreshold,t=t&&e._rendererSettings.mergeLines===this._rendererSettings.mergeLines,t=t&&e._rendererSettings.interpolate===this._rendererSettings.interpolate,t&&this._rendererSettings.mergeLines&&(t=e._rendererSettings.lineCollisionWidth===this._rendererSettings.lineCollisionWidth),!!t}async loadResources(e,t){const{extent:i,size:s}=e;Object(y.u)(t);const r=await this._loadImagery(i,s[0],s[1],t),{vertexData:n,indexData:a}=await this._createStreamlinesMesh(this._rendererSettings,r,t);return new I(n,a)}}let V=class extends r.a{constructor(){super(...arguments),this._loadImagery=(e,t,i,s)=>Object(o.b)(this.layer,e,t,i,s),this._createStreamlinesMesh=(e,t,i)=>this.layer.createStreamlinesMesh({flowData:t,rendererSettings:e},{signal:i}),this.container=null,this.layer=null,this.type="rasterAnimatedFlow",this.redrawOrRefetch=async()=>{this._rendererChanged()}}get updating(){return!this._strategy||this._strategy.updating}update(e){e.stationary?this._strategy.update(e):this.layerView.requestUpdate()}install(e){this.container=new u,e.addChild(this.container),this._strategy=new P({flowContainer:this.container}),this._rendererChanged()}uninstall(){this._strategy.destroy(),this.container.removeAllChildren(),this.container.remove()}moveEnd(){}async doRefresh(){}attach(){}_rendererChanged(){if("animated-flow"!==this.layer.renderer.type)return;const e=new T(this._loadImagery,this._createStreamlinesMesh,this.layer.renderer);this.container.flowStyle=e,this.layerView.requestUpdate()}};Object(s.a)([Object(n.b)()],V.prototype,"_strategy",void 0),Object(s.a)([Object(n.b)()],V.prototype,"container",void 0),Object(s.a)([Object(n.b)()],V.prototype,"layer",void 0),Object(s.a)([Object(n.b)()],V.prototype,"layerView",void 0),Object(s.a)([Object(n.b)()],V.prototype,"type",void 0),Object(s.a)([Object(n.b)()],V.prototype,"updating",null),V=Object(s.a)([Object(a.a)("esri.views.2d.engine.flow.AnimatedFlowView2D")],V);const C=V}}]);